{
  "kind": "Dashboard",
  "metadata": {
    "name": "ceph-rgw-cluster-instance",
    "project": "ceph-storage"
  },
  "spec": {
    "display": {
      "name": "ceph rgw cluster + instance"
    },
    "panels": {
      "0_0": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Status UP"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "decimal"
              },
              "thresholds": {
                "steps": []
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "count(ceph_rgw_metadata)",
                    "seriesNameFormat": ""
                  }
                }
              }
            }
          ]
        }
      },
      "0_1": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Status DOWN"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "decimal"
              },
              "thresholds": {
                "steps": [
                  {
                    "color": "#EE6C6C",
                    "value": 1
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "count(ceph_rgw_metadata) - sum(ceph_rgw_metadata)",
                    "seriesNameFormat": "Down"
                  }
                }
              }
            }
          ]
        }
      },
      "0_10": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Cluster Reads/Writes"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "querySettings": [
                {
                  "colorMode": "fixed",
                  "colorValue": "#59CC8D",
                  "queryIndex": 0
                },
                {
                  "colorMode": "fixed",
                  "colorValue": "#FFB249",
                  "queryIndex": 1
                }
              ],
              "thresholds": {
                "steps": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "requests/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum (\n  rate(radosgw_requests_by_method{method=~\"GET|HEAD\"}[$__rate_interval])\n)",
                    "seriesNameFormat": "Read OPs"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum (\n  rate(radosgw_requests_by_method{method=~\"PUT|POST|DELETE\"}[$__rate_interval])\n)",
                    "seriesNameFormat": "Write OPs"
                  }
                }
              }
            }
          ]
        }
      },
      "0_11": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW OPs By Method"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "requests/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum by (method) (rate(radosgw_requests_by_method[$__rate_interval]))",
                    "seriesNameFormat": "{{method}}"
                  }
                }
              }
            }
          ]
        }
      },
      "0_12": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW OPs By Status"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "requests/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum by (status) (rate(radosgw_requests_by_status_detailed[$__rate_interval]))",
                    "seriesNameFormat": "{{status}}"
                  }
                }
              }
            }
          ]
        }
      },
      "0_13": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Total Data Uploaded/Downloaded"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "querySettings": [
                {
                  "colorMode": "fixed",
                  "colorValue": "#2FBF71",
                  "queryIndex": 0
                },
                {
                  "colorMode": "fixed",
                  "colorValue": "#FF9F1C",
                  "queryIndex": 1
                }
              ],
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "bytes"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum by (cluster) (increase(radosgw_bytes_received[$__range]))",
                    "seriesNameFormat": "Uploaded"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "sum by (cluster) (increase(radosgw_bytes_sent[$__range]))",
                    "seriesNameFormat": "Downloaded"
                  }
                }
              }
            }
          ]
        }
      },
      "0_14": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Objects in the Cluster"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": true,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "decimal"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum (ceph_pool_objects) by (pool_id)",
                    "seriesNameFormat": "pool id {{ pool_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "0_2": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Available Cluster Capacity"
          },
          "plugin": {
            "kind": "GaugeChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "percent-decimal"
              },
              "max": 1,
              "thresholds": {
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "yellow",
                    "value": 0.1
                  },
                  {
                    "color": "green",
                    "value": 0.3
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "(ceph_cluster_total_bytes - ceph_cluster_total_used_bytes) / ceph_cluster_total_bytes",
                    "seriesNameFormat": " "
                  }
                }
              }
            }
          ]
        }
      },
      "0_3": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Available Cluster Capacity"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "bytes"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "ceph_cluster_total_bytes",
                    "seriesNameFormat": ""
                  }
                }
              }
            }
          ]
        }
      },
      "0_4": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Used Cluster Capacity"
          },
          "plugin": {
            "kind": "GaugeChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "percent-decimal"
              },
              "max": 1,
              "thresholds": {
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "yellow",
                    "value": 0.7
                  },
                  {
                    "color": "red",
                    "value": 0.8
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "ceph_cluster_total_used_bytes / ceph_cluster_total_bytes",
                    "seriesNameFormat": " "
                  }
                }
              }
            }
          ]
        }
      },
      "0_5": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Used Cluster Capacity"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "shortValues": true,
                  "unit": "bytes"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "ceph_cluster_total_used_bytes",
                    "seriesNameFormat": ""
                  }
                }
              }
            }
          ]
        }
      },
      "0_6": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Cluster Latencies"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "querySettings": [
                {
                  "colorMode": "fixed",
                  "colorValue": "#FFB249",
                  "queryIndex": 0
                },
                {
                  "colorMode": "fixed",
                  "colorValue": "#59CC8D",
                  "queryIndex": 1
                },
                {
                  "colorMode": "fixed",
                  "colorValue": "#4677f3",
                  "queryIndex": 2
                },
                {
                  "colorMode": "fixed",
                  "colorValue": "#EE6C6C",
                  "queryIndex": 3
                }
              ],
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "seconds"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "sum by (cluster) (\n  rate(radosgw_requests_duration_sum{method=\"GET\"}[$__rate_interval])\n) /\nsum by (cluster) (\n  rate(radosgw_requests_duration_count{method=\"GET\"}[$__rate_interval])\n)",
                    "seriesNameFormat": "GET {{cluster}}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "sum by (cluster) (\n  rate(radosgw_requests_duration_sum{method=\"PUT\"}[$__rate_interval])\n) /\nsum by (cluster) (\n  rate(radosgw_requests_duration_count{method=\"PUT\"}[$__rate_interval])\n)",
                    "seriesNameFormat": "PUT {{cluster}}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "sum by (cluster) (\n  rate(radosgw_requests_duration_sum{method=\"POST\"}[$__rate_interval])\n) /\nsum by (cluster) (\n  rate(radosgw_requests_duration_count{method=\"POST\"}[$__rate_interval])\n)",
                    "seriesNameFormat": "POST {{cluster}}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "sum by (cluster) (\n  rate(radosgw_requests_duration_sum{method=\"DELETE\"}[$__rate_interval])\n) /\nsum by (cluster) (\n  rate(radosgw_requests_duration_count{method=\"DELETE\"}[$__rate_interval])\n)",
                    "seriesNameFormat": "DELETE {{cluster}}"
                  }
                }
              }
            }
          ]
        }
      },
      "0_7": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Cluster Throughput"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "size": "small",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": true,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "bytes/sec"
                },
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "(sum by (cluster) (rate(radosgw_bytes_sent[$__rate_interval])) or on() vector(0)) +\n(sum by (cluster) (rate(radosgw_bytes_received[$__rate_interval])) or on() vector(0))",
                    "seriesNameFormat": "{{ cluster }}"
                  }
                }
              }
            }
          ]
        }
      },
      "0_8": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Cluster Total OPs"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "requests/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum by (cluster) (rate(radosgw_total_requests[$__rate_interval]))",
                    "seriesNameFormat": "{{ cluster }}"
                  }
                }
              }
            }
          ]
        }
      },
      "0_9": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Data Sent / Received"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "bytes/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum by (cluster) (rate(radosgw_bytes_sent[$__rate_interval]))",
                    "seriesNameFormat": "Data Sent"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum by (cluster) (rate(radosgw_bytes_received[$__rate_interval]))",
                    "seriesNameFormat": "Data Received"
                  }
                }
              }
            }
          ]
        }
      },
      "1_0": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Total RGW Instance OPs"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": true,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "requests/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_total_requests[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "{{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_1": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Instance Latency GET"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "seconds"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_requests_duration_sum{method=\"GET\"}[$__rate_interval])\n  ) /\n  sum by (pod) (\n    rate(radosgw_requests_duration_count{method=\"GET\"}[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "{{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_10": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Failed Requests"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "requests/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_errors_detailed[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "{{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_2": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Overall Throughput by Type"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": true,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "bytes/sec"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum(rate(ceph_rgw_get_b[$__rate_interval]))",
                    "seriesNameFormat": "GETs"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum(rate(ceph_rgw_put_b[$__rate_interval]))",
                    "seriesNameFormat": "PUTs"
                  }
                }
              }
            }
          ]
        }
      },
      "1_3": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Instance Throughput (GET/PUT)",
            "description": "Total bytes transferred in/out through get/put operations, by radosgw instance"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": true,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "bytes/sec"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  (sum by (pod) (rate(radosgw_bytes_sent[$__rate_interval])) or on() vector(0)) +\n  (sum by (pod) (rate(radosgw_bytes_received[$__rate_interval])) or on() vector(0)),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "{{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_4": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Instance Latency PUT"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "seconds"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_requests_duration_sum{method=\"PUT\"}[$__rate_interval])\n  ) /\n  sum by (pod) (\n    rate(radosgw_requests_duration_count{method=\"PUT\"}[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "{{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_5": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Instance OPs by Type"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": true,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "requests/sec"
                },
                "label": "",
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_errors_detailed[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "Requests Failed {{ pod_id }}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_requests_by_method{method=\"GET\"}[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "GETs {{ pod_id }}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum by (pod) (\n  rate(radosgw_requests_by_method{method=\"PUT\"}[$__rate_interval])\n)",
                    "seriesNameFormat": "PUTs {{ pod }}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_total_requests[$__rate_interval])\n  ) -\n  sum by (pod) (\n    rate(radosgw_total_requests{method=~\"GET|PUT\"}[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "Other {{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_6": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Throughput by HTTP Method"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": true,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "bytes/sec"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  rate(ceph_rgw_get_b[$__rate_interval]),\n  \"rgw_host\", \"$1\", \"pod\", \"rook-ceph-exporter-(.*)-.*-.*\"\n)",
                    "seriesNameFormat": "GETs {{ rgw_host }}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(rate(ceph_rgw_put_b[$__rate_interval]), \"rgw_host\", \"$1\", \"pod\", \"rook-ceph-exporter-(.*)-.*-.*\")",
                    "seriesNameFormat": "PUTs {{ rgw_host }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_7": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Instance Latency DELETE"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "seconds"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_requests_duration_sum{method=\"DELETE\"}[$__rate_interval])\n  ) /\n  sum by (pod) (\n    rate(radosgw_requests_duration_count{method=\"DELETE\"}[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "{{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_8": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RGW Instance Latency POST"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "mode": "list",
                "position": "bottom",
                "values": []
              },
              "visual": {
                "areaOpacity": 0,
                "connectNulls": false,
                "display": "line",
                "lineWidth": 1.25,
                "pointRadius": 2.75
              },
              "yAxis": {
                "format": {
                  "unit": "seconds"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "label_replace(\n  sum by (pod) (\n    rate(radosgw_requests_duration_sum{method=\"POST\"}[$__rate_interval])\n  ) /\n  sum by (pod) (\n    rate(radosgw_requests_duration_count{method=\"POST\"}[$__rate_interval])\n  ),\n  \"pod_id\", \"$1\", \"pod\", \"rook-ceph-rgw-ceph-objectstore-.*-[0-9]-(.*)\"\n)",
                    "seriesNameFormat": "{{ pod_id }}"
                  }
                }
              }
            }
          ]
        }
      },
      "1_9": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Request Queue Length"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "mean",
              "format": {
                "unit": "decimal"
              },
              "thresholds": {
                "steps": [
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "datasource": {
                      "kind": "PrometheusDatasource"
                    },
                    "minStep": "",
                    "query": "sum(ceph_rgw_qlen)",
                    "seriesNameFormat": ""
                  }
                }
              }
            }
          ]
        }
      }
    },
    "layouts": [
      {
        "kind": "Grid",
        "spec": {
          "display": {
            "title": "Cluster Overview",
            "collapse": {
              "open": true
            }
          },
          "items": [
            {
              "x": 0,
              "y": 0,
              "width": 4,
              "height": 4,
              "content": {
                "$ref": "#/spec/panels/0_0"
              }
            },
            {
              "x": 0,
              "y": 4,
              "width": 4,
              "height": 4,
              "content": {
                "$ref": "#/spec/panels/0_1"
              }
            },
            {
              "x": 4,
              "y": 0,
              "width": 3,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_2"
              }
            },
            {
              "x": 7,
              "y": 0,
              "width": 5,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_3"
              }
            },
            {
              "x": 12,
              "y": 0,
              "width": 3,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_4"
              }
            },
            {
              "x": 15,
              "y": 0,
              "width": 5,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_5"
              }
            },
            {
              "x": 0,
              "y": 8,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_6"
              }
            },
            {
              "x": 8,
              "y": 8,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_7"
              }
            },
            {
              "x": 16,
              "y": 8,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_8"
              }
            },
            {
              "x": 8,
              "y": 16,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_9"
              }
            },
            {
              "x": 16,
              "y": 16,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_10"
              }
            },
            {
              "x": 8,
              "y": 24,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_11"
              }
            },
            {
              "x": 16,
              "y": 24,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_12"
              }
            },
            {
              "x": 0,
              "y": 24,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_13"
              }
            },
            {
              "x": 0,
              "y": 16,
              "width": 8,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/0_14"
              }
            }
          ]
        }
      },
      {
        "kind": "Grid",
        "spec": {
          "display": {
            "title": "RGW Instance Overview",
            "collapse": {
              "open": true
            }
          },
          "items": [
            {
              "x": 8,
              "y": 0,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_1"
              }
            },
            {
              "x": 0,
              "y": 0,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_2"
              }
            },
            {
              "x": 16,
              "y": 0,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_4"
              }
            },
            {
              "x": 0,
              "y": 7,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_3"
              }
            },
            {
              "x": 8,
              "y": 7,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_8"
              }
            },
            {
              "x": 16,
              "y": 7,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_7"
              }
            },
            {
              "x": 8,
              "y": 14,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_0"
              }
            },
            {
              "x": 8,
              "y": 21,
              "width": 8,
              "height": 7,
              "content": {
                "$ref": "#/spec/panels/1_5"
              }
            },
            {
              "x": 0,
              "y": 14,
              "width": 8,
              "height": 10,
              "content": {
                "$ref": "#/spec/panels/1_6"
              }
            },
            {
              "x": 4,
              "y": 24,
              "width": 4,
              "height": 3,
              "content": {
                "$ref": "#/spec/panels/1_9"
              }
            },
            {
              "x": 16,
              "y": 14,
              "width": 8,
              "height": 10,
              "content": {
                "$ref": "#/spec/panels/1_10"
              }
            }
          ]
        }
      }
    ],
    "variables": [
      {
        "kind": "ListVariable",
        "spec": {
          "display": {
            "name": "Datasource",
            "hidden": false
          },
          "defaultValue": "kube-monitoring-st1-eu-de-1-prometheus",
          "allowAllValue": false,
          "allowMultiple": false,
          "plugin": {
            "kind": "PrometheusLabelValuesVariable",
            "spec": {
              "labelName": "job",
              "matchers": [
                "prometheus_build_info"
              ]
            }
          },
          "name": "datasource"
        }
      }
    ],
    "duration": "1h",
    "refreshInterval": "0s"
  }
}